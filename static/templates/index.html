{% extends 'base.html' %}
{% block content %}
    {% if user.is_authenticated %}
        <div class="row">
            {% for d in data %}
                <div class="col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">{{d.idSensor}}</h3>
                            <span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
                        </div>
                        <div class="panel-body">
                            <table>
                                <tr>
                                    <td><h2><small><sup>Temperatura: </sup></small></h2></td>
                                    <td class="text-right"><h2>{{ d.temperature }} &#x2103</h2></td>
                                </tr>
                                <tr>
                                    <td><h2><small><sup>Wilgotność: </sup></small></h2></td>
                                    <td class="text-right"><h2>{{ d.humidity }} % RH</h2></td>
                                </tr>
                                <tr>
                                    <td><h2><small><sup>Data: </sup></small></h2></td>
                                    <td class="text-right"><h2>{{ d.timestamp }}</h2></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="jumbotron">
            <div class="container">
                <h1>Aby mieć dostęp do danych, musisz się zalogować!</h1>
                <p><a class="btn btn-primary" href="{% url 'django.contrib.auth.views.login' %}" role="button">Zaloguj &raquo;</a></p>
            </div>
        </div>
    {% endif %}
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript">
        $(document).on('click', '.panel-heading span.clickable', function(e){
            var $this = $(this);
            if(!$this.hasClass('panel-collapsed')) {
                $this.parents('.panel').find('.panel-body').slideUp();
                $this.addClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
            } else {
                $this.parents('.panel').find('.panel-body').slideDown();
                $this.removeClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
            }
        })
    </script>
{% endblock %}



